<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DMC Inventory Management System</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <h2>DMC Inventory</h2>
                    <p>Divisional Secretariat Aranayake</p>
                </div>
                <button class="sidebar-toggle" id="sidebarToggle" title="Collapse Sidebar">
                    <span class="toggle-icon">‚óÄ</span>
                </button>
            </div>
            <ul class="nav-menu">
                <li class="nav-item active" data-page="dashboard">
                    <span class="icon">üìä</span>
                    <span>Dashboard</span>
                </li>
                <li class="nav-item" data-page="current-stock">
                    <span class="icon">üì¶</span>
                    <span>Current Stock</span>
                </li>
                <li class="nav-item" data-page="incoming">
                    <span class="icon">üì•</span>
                    <span>Incoming Stock</span>
                </li>
                <li class="nav-item" data-page="donations">
                    <span class="icon">üéÅ</span>
                    <span>Donations</span>
                </li>
                <li class="nav-item" data-page="outgoing">
                    <span class="icon">üì§</span>
                    <span>Dispatch/Outgoing</span>
                </li>
                <li class="nav-item" data-page="care-packages">
                    <span class="icon">üì¶</span>
                    <span>Care Packages</span>
                </li>
                <li class="nav-item" data-page="items">
                    <span class="icon">üè∑Ô∏è</span>
                    <span>Items Master</span>
                </li>
                <li class="nav-item" data-page="centers">
                    <span class="icon">üè¢</span>
                    <span>Centers Master</span>
                </li>
                <li class="nav-item" data-page="gn-divisions">
                    <span class="icon">üó∫Ô∏è</span>
                    <span>GN Divisions</span>
                </li>
                <li class="nav-item" data-page="reports">
                    <span class="icon">üìä</span>
                    <span>Reports</span>
                </li>
                <li class="nav-item" data-page="settings">
                    <span class="icon">‚öôÔ∏è</span>
                    <span>Settings</span>
                </li>
            </ul>
        </nav>

        <!-- Main Content Area -->
        <main class="main-content">
            <header class="top-bar">
                <button class="hamburger-btn" id="hamburgerBtn" title="Open Menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <h1 id="page-title">Dashboard</h1>
                <div class="header-actions">
                    <button id="refreshBtn" class="btn btn-secondary">üîÑ Refresh</button>
                </div>
            </header>

            <div class="content-area">
                <!-- Dashboard Page -->
                <div id="dashboard-page" class="page active">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">üì¶</div>
                            <div class="stat-info">
                                <h3 id="total-items">0</h3>
                                <p>Total Items</p>
                            </div>
                        </div>
                        <div class="stat-card low-stock">
                            <div class="stat-icon">‚ö†Ô∏è</div>
                            <div class="stat-info">
                                <h3 id="low-stock-count">0</h3>
                                <p>Low Stock Items</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üè¢</div>
                            <div class="stat-info">
                                <h3 id="total-centers">0</h3>
                                <p>Active Centers</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üìä</div>
                            <div class="stat-info">
                                <h3 id="total-transactions">0</h3>
                                <p>Total Transactions</p>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-content">
                        <div class="card">
                            <h3>Low Stock Alert</h3>
                            <div class="table-container">
                                <table id="low-stock-table">
                                    <thead>
                                        <tr>
                                            <th>Item Name</th>
                                            <th>Category</th>
                                            <th>Current Qty</th>
                                            <th>Reorder Level</th>
                                            <th>Unit</th>
                                        </tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Current Stock Page -->
                <div id="current-stock-page" class="page">
                    <div class="page-actions">
                        <input type="text" id="stock-search" class="search-input" placeholder="Search items...">
                        <button id="viewHistoryBtn" class="btn btn-secondary">üìã View History</button>
                    </div>
                    <div class="card">
                        <div class="table-container">
                            <table id="current-stock-table">
                                <thead>
                                    <tr>
                                        <th>Item ID</th>
                                        <th>Item Name</th>
                                        <th>Category</th>
                                        <th>Current Quantity</th>
                                        <th>Unit</th>
                                        <th>Total Incoming</th>
                                        <th>Total Outgoing</th>
                                        <th>Reorder Level</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Incoming Stock Page -->
                <div id="incoming-page" class="page">
                    <div class="page-actions">
                        <button id="addIncomingBillBtn" class="btn btn-primary">‚ûï Add Incoming Bill (GRN)</button>
                    </div>
                    <div class="card">
                        <div class="table-container">
                            <table id="incoming-bills-table">
                                <thead>
                                    <tr>
                                        <th>Bill Number</th>
                                        <th>Date</th>
                                        <th>Supplier</th>
                                        <th>Items</th>
                                        <th>Total Qty</th>
                                        <th>Remarks</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Donations Page -->
                <div id="donations-page" class="page">
                    <div class="page-actions">
                        <button id="addDonationBillBtn" class="btn btn-primary">‚ûï Add Donation Bill</button>
                    </div>
                    <div class="card">
                        <div class="table-container">
                            <table id="donation-bills-table">
                                <thead>
                                    <tr>
                                        <th>Bill Number</th>
                                        <th>Date</th>
                                        <th>Donor</th>
                                        <th>Items</th>
                                        <th>Total Qty</th>
                                        <th>Remarks</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Outgoing Stock Page -->
                <div id="outgoing-page" class="page">
                    <div class="page-actions">
                        <button id="addOutgoingBillBtn" class="btn btn-primary">‚ûï Add Dispatch Bill</button>
                    </div>
                    <div class="card">
                        <div class="table-container">
                            <table id="outgoing-bills-table">
                                <thead>
                                    <tr>
                                        <th>Bill Number</th>
                                        <th>Date</th>
                                        <th>Center</th>
                                        <th>Officer</th>
                                        <th>NIC</th>
                                        <th>Items</th>
                                        <th>Total Qty</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Care Packages Page -->
                <div id="care-packages-page" class="page">
                    <div class="tabs">
                        <button class="tab-btn active" data-tab="templates">Package Templates</button>
                        <button class="tab-btn" data-tab="issues">Package Issues</button>
                    </div>

                    <!-- Package Templates Tab -->
                    <div id="templates-tab" class="tab-content active">
                        <div class="page-actions">
                            <button id="addCarePackageTemplateBtn" class="btn btn-primary">‚ûï Create Package Template</button>
                        </div>
                        <div class="card">
                            <div class="table-container">
                                <table id="care-package-templates-table">
                                    <thead>
                                        <tr>
                                            <th>Template ID</th>
                                            <th>Package Name</th>
                                            <th>Description</th>
                                            <th>Items Count</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Package Issues Tab -->
                    <div id="issues-tab" class="tab-content">
                        <div class="page-actions">
                            <button id="issueCarePackageBtn" class="btn btn-primary">‚ûï Issue Care Packages</button>
                        </div>
                        <div class="card">
                            <div class="table-container">
                                <table id="care-package-issues-table">
                                    <thead>
                                        <tr>
                                            <th>Issue ID</th>
                                            <th>Date Issued</th>
                                            <th>Package Name</th>
                                            <th>Qty Issued</th>
                                            <th>Recipient Type</th>
                                            <th>Recipient</th>
                                            <th>Officer</th>
                                            <th>Officer NIC</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Items Master Page -->
                <div id="items-page" class="page">
                    <div class="page-actions">
                        <button id="addItemBtn" class="btn btn-primary">‚ûï Add Item</button>
                        <button id="bulkUploadItemsBtn" class="btn btn-secondary">üì§ Bulk Upload CSV</button>
                    </div>
                    <div class="card">
                        <div class="table-container">
                            <table id="items-table">
                                <thead>
                                    <tr>
                                        <th>Item ID</th>
                                        <th>Item Name</th>
                                        <th>Unit</th>
                                        <th>Category</th>
                                        <th>Reorder Level</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Centers Master Page -->
                <div id="centers-page" class="page">
                    <div class="page-actions">
                        <button id="addCenterBtn" class="btn btn-primary">‚ûï Add Center</button>
                        <button id="bulkUploadCentersBtn" class="btn btn-secondary">üì§ Bulk Upload CSV</button>
                    </div>
                    <div class="card">
                        <div class="table-container">
                            <table id="centers-table">
                                <thead>
                                    <tr>
                                        <th>Center ID</th>
                                        <th>Center Name</th>
                                        <th>GN Division</th>
                                        <th>Contact Person</th>
                                        <th>Phone</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- GN Divisions Master Page -->
                <div id="gn-divisions-page" class="page">
                    <div class="page-actions">
                        <button id="addGNDivisionBtn" class="btn btn-primary">‚ûï Add GN Division</button>
                        <button id="bulkUploadGNBtn" class="btn btn-secondary">üì§ Bulk Upload CSV</button>
                    </div>
                    <div class="card">
                        <div class="table-container">
                            <table id="gn-divisions-table">
                                <thead>
                                    <tr>
                                        <th>GN ID</th>
                                        <th>GN Division Name</th>
                                        <th>DS Division</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Reports Page -->
                <div id="reports-page" class="page">
                    <div class="card">
                        <h3>Generate PDF Reports</h3>
                        
                        <!-- Report Type Selection -->
                        <div class="form-group">
                            <label>Report Type</label>
                            <select id="reportType" class="form-control">
                                <option value="current-stock">Current Stock Levels</option>
                                <option value="incoming">Incoming Stock</option>
                                <option value="outgoing">Outgoing Stock</option>
                                <option value="donations">Donations</option>
                                <option value="care-packages">Care Packages Issued</option>
                                <option value="center-wise-items">Center-Wise Items Issued</option>
                            </select>
                        </div>

                        <!-- Center Selection (for center-wise report) -->
                        <div id="centerSelectionSection" class="form-group" style="display: none;">
                            <label>Select Center *</label>
                            <select id="reportCenter" class="form-control">
                                <option value="">-- Select Center --</option>
                            </select>
                        </div>

                        <!-- Date Range (for time-based reports) -->
                        <div id="dateRangeSection" style="display: none;">
                            <div class="form-row">
                                <div class="form-group">
                                    <label>From Date</label>
                                    <input type="date" id="reportDateFrom" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label>To Date</label>
                                    <input type="date" id="reportDateTo" class="form-control">
                                </div>
                            </div>
                        </div>

                        <!-- Item Selection -->
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="selectAllItems" checked>
                                Select All Items
                            </label>
                        </div>

                        <div id="itemSelectionSection" style="display: none;">
                            <div class="form-group">
                                <label>Select Items</label>
                                <div id="itemsList" style="max-height: 300px; overflow-y: auto; border: 1px solid #ddd; padding: 10px; border-radius: 4px;">
                                    <!-- Items checkboxes will be populated here -->
                                </div>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button id="generateReportBtn" class="btn btn-primary">üìÑ Generate PDF Report</button>
                        </div>
                    </div>

                    <!-- Report Preview Info -->
                    <div class="card" id="reportPreviewCard" style="display: none;">
                        <h3>Report Preview</h3>
                        <div id="reportPreview"></div>
                    </div>
                </div>

                <!-- Settings Page -->
                <div id="settings-page" class="page">
                    <div class="card">
                        <h3>Database Management</h3>
                        <div class="settings-group">
                            <button id="exportDbBtn" class="btn btn-primary">üíæ Export Database</button>
                            <p class="help-text">Export the current database to a backup file</p>
                        </div>
                        <div class="settings-group">
                            <button id="importDbBtn" class="btn btn-warning">üìÇ Import Database</button>
                            <p class="help-text">Import a database from a backup file (will replace current data)</p>
                        </div>
                    </div>
                    <div class="card">
                        <h3>About</h3>
                        <p><strong>Application:</strong> DMC Inventory Management System</p>
                        <p><strong>Version:</strong> 1.0.0</p>
                        <p><strong>Purpose:</strong> Track inventory for Disaster Management Centers</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal Container -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="modal-title">Modal Title</h2>
            <div id="modal-body"></div>
        </div>
    </div>

    <script src="bill-functions.js"></script>
    <script src="app.js"></script>
</body>
</html>
